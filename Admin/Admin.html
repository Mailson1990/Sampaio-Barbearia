<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Painel Admin ‚Äî Sampaio Barbearia</title>
  <link rel="stylesheet" href="css/admin.css" />
</head>
<body>
  <!-- Tela de Login -->
<div id="login-container" class="login-container">
  <div class="login-box">
    <h2>üîí Painel Administrativo</h2>
    <p>Digite a senha para acessar:</p>
    <input type="password" id="senha" placeholder="Senha de acesso" />
    <button id="btn-login" class="btn primary">Entrar</button>
    <button id="btn-area-cliente" class="btn">Ir para √Årea do Cliente</button>
    <p id="erro" class="erro oculto">Senha incorreta!</p>
  </div>
</div>
  <!-- Painel -->
  <div id="painel" class="oculto">
    <header class="admin-header">
      <h1>üìã Painel de Agendamentos</h1>
      <div class="botoes-admin">
        <button id="btn-limpar" class="btn danger">Excluir Tudo</button>
        <button id="btn-sair" class="btn">Sair</button>
      </div>
    </header>
    <main class="container">
  <div class="filtro-container">
    <input
      type="text"
      id="filtro"
      placeholder="üîç Buscar por nome, servi√ßo ou data..."
      class="filtro-input"
    />
  </div>

  <table id="tabela">
    <thead>
      <tr>
        <th>Nome</th>
        <th>Telefone</th>
        <th>Servi√ßo</th>
        <th>Respons√°vel</th>
        <th>Data</th>
        <th>Hora</th>
        <th>Criado em</th>
        <th>A√ß√µes</th>
      </tr>
    </thead>
    <tbody id="lista-agendamentos"></tbody>
  </table>
</main>
    <footer class="admin-footer">
      <p>¬© <span id="ano"></span> Sampaio Barbearia ‚Äî Painel Administrativo</p>
    </footer>
  </div>
<script type="module">
// ======= IMPORTAR FIREBASE =======
import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
import { getFirestore, collection, getDocs, deleteDoc, doc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

// ======= CONFIGURA√á√ÉO FIREBASE =======
const firebaseConfig = {
  apiKey: "SUA_API_KEY_AQUI",
  authDomain: "SEU_DOMINIO.firebaseapp.com",
  projectId: "sampaio-barbearia",
  storageBucket: "sampaio-barbearia.appspot.com",
  messagingSenderId: "SEU_ID",
  appId: "SEU_APP_ID"
};

// Inicializar Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// ======= ELEMENTOS =======
const lista = document.getElementById("lista-agendamentos");
const btnAtualizar = document.getElementById("btn-atualizar");

// ======= CARREGAR AGENDAMENTOS =======
async function carregarAgendamentos() {
  lista.innerHTML = "<li>Carregando...</li>";

  const querySnapshot = await getDocs(collection(db, "agendamentos"));
  lista.innerHTML = "";

  if (querySnapshot.empty) {
    lista.innerHTML = "<li>Nenhum agendamento encontrado.</li>";
    return;
  }

  querySnapshot.forEach((docSnap) => {
    const ag = docSnap.data();
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${ag.nome}</strong> - ${ag.servico}<br>
      Respons√°vel: ${ag.responsavel}<br>
      üìÖ ${ag.data} ‚è∞ ${ag.hora}<br>
      <button class="btn-excluir" data-id="${docSnap.id}">Excluir</button>
    `;
    lista.appendChild(li);
  });

  // Eventos de exclus√£o
  document.querySelectorAll(".btn-excluir").forEach((btn) => {
    btn.addEventListener("click", async () => {
      const id = btn.getAttribute("data-id");
      if (confirm("Tem certeza que deseja excluir este agendamento?")) {
        await deleteDoc(doc(db, "agendamentos", id));
        alert("Agendamento exclu√≠do!");
        carregarAgendamentos();
      }
    });
  });
}

// ======= BOT√ÉO ATUALIZAR =======
btnAtualizar.addEventListener("click", carregarAgendamentos);

// ======= INICIALIZA =======
carregarAgendamentos();
</script>

  <script src="js/admin.js"></script>
</body>
</html>